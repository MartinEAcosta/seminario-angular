<section class="bg-section">
        <div class="container">

            <div class="container-thumbnail">
                <app-thumbnail-selector />
            </div>

            <form class="form-course" [formGroup]="courseFormState.courseForm" (ngSubmit)="onSubmit()">

                <div class="container-form-top">
                    <input 
                        formControlName="title" 
                        class="input input-title" 
                        type="text" 
                        placeholder="Título del curso"
                    />
                    
                    <form-error-label [control]="courseFormState.courseForm.get('title')!" [warningSvg]=true />
                    
                    @if( this.courseFormState.course() ){
                        <div class="container-remove" (click)="onDeleteCourse( this.courseFormState.course()!.id! )">
                            <img class="svg-remove" src="assets/remove.svg" alt="">
                        </div>
                    }
                </div>

                <div class="container-form-description">
                    <textarea 
                        formControlName="description" 
                        class="input input-description" 
                        type="text" 
                        placeholder="Escribe una breve descripción del curso...">
                    </textarea>
    
                    <form-error-label [control]="courseFormState.courseForm.get('description')!" [warningSvg]=true />
                </div>

                <app-category-select 
                    (clickCategory)="courseFormState.courseForm.get('id_category')?.setValue($event)"
                />

                <div class="container-form-right">
                    <div class="container-pricing">
                        <label class="label-pricing">
                            Precio del curso
                        </label>
                        <input 
                            formControlName="price"
                            class="input input-pricing" 
                            type="number" 
                            [ngClass]="{ 
                                'invalid-border': courseFormState.courseForm.get('price')?.errors && courseFormState.courseForm.get('price')?.touched , 
                                'valid-border': courseFormState.courseForm.get('price')?.touched && !courseFormState.courseForm.get('price')?.errors 
                            }" 
                            placeholder="5" 
                        />
                        <form-error-label [control]="courseFormState.courseForm.get('price')!" />
                    </div>
                    <div class="container-capacity">
                        <div class="container-inline">
                            <label class="label-capacity" [ngClass]="{ 'unlimited-capacity' : !courseFormState.courseForm.get('wantLimitedCapacity')?.value}">
                                Capacidad Limitada
                            </label>
                            <input 
                            formControlName="capacity" 
                            type="number" 
                            class="input input-capacity" 
                            [ngClass]="{ 
                                    'invalid-border': courseFormState.courseForm.get('capacity')?.errors, 
                                    'valid-border': courseFormState.courseForm.get('capacity')?.touched && !courseFormState.courseForm.get('capacity')?.errors && courseFormState.courseForm.get('wantLimitedCapacity')?.value ,
                                    'unlimited-capacity' :!courseFormState.courseForm.get('wantLimitedCapacity')?.value
                                }" 
                                placeholder="5" 
                                />
                                <div class="switch-container">
                                    <input type="checkbox" id="switch-label" class="switch-checkbox" formControlName="wantLimitedCapacity" >
                                    <label for="switch-label" class="switch-label" >
                                    </label>
                                </div>
                        </div>
                        <div class="container-error">
                            <form-error-label [control]="courseFormState.courseForm.get('capacity')!" />
                        </div>
                    </div>
                </div>

                <div class="container-btn">
                    <button 
                        class="btn btn-create" 
                        type="submit"
                        >
                        {{ this.courseFormState.course()?.id  ? 'Editar curso': 'Crear curso'}}
                    </button>
                    <button class="btn btn-cancel" type="reset">
                        Cancelar
                    </button>
                </div>

                <div class="container-files">                    
                    <input 
                        type="file" 
                        class="input-file" 
                        multiple
                        accept="image/*,video/*"
                        />
                    <label for="file" class="custom-file-label custom-content">
                        <img src="assets/new-white-icon.svg" alt="">
                        Agregar contenido
                    </label>

                    <input 
                        type="file" 
                        id="file" 
                        name="file" 
                        class="input-file"
                        accept="image/*"
                        (change)="this.courseFormState.onThumbnailChanged( $event )"
                        />
                    <label for="file" class="custom-file-label">
                        <img src="assets/thumbnail-icon.svg" alt="">
                        Agregar portada
                    </label>
                </div>
            </form>
        </div>

        <app-slider-content-manager  />

    </section> 