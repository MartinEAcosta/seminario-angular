<section 
    [ngClass]="[ lessonFormState.isLessonFormVisible() ? 'expand' : '' ]"
    class="bg-slider-content">

        <div class="container-options">

            <div class="container-thumbnail-selector">
                <app-thumbnail-selector class="thumbnail-selector" [folder]="'courses'"/>
            </div>

            <div class="container-lessons-thumbnails">
                <div class="container-add-lesson">
                    <div class="card-thumbnail card-action">
                        <figure (click)="onAddModule()" class="figure figure-module">
                            <img src="./assets/bracket-curly-left.svg" alt="Bracket Curyl Left Icon" class="icon icon-bracket">
                            <p class="text-simple"> Crear nuevo módulo</p>
                            <img src="./assets/bracket-curly-right.svg" alt="Bracket Curyl Right Icon" class="icon icon-bracket">
                        </figure>
                    </div>
                    <div class="card-thumbnail card-action">
                        <figure (click)="onAddLesson()" class="figure">
                            <img 
                            class="icon"
                            src="./assets/add-icon.svg" alt="Add Icon">
                            <p class="text-simple"> Añade una nueva lección</p>
                        </figure>
                    </div>
                </div>

                <div class="container-slider">
                    <div class="slider-content">
                        @for( lesson of this.lessonFormState.lessons() ; track lesson ){
                            <div 
                            (click)="onSelectLesson( lesson )" 
                            class="card-thumbnail thumbnail-lesson">
                                <figure class="figure">
                                    @if( lessonFormState.lessonSelected()?.id === lesson.id && lessonFormState.tempMedia( ) != null ){
                                        <img class="thumbnail-lesson" 
                                                src="{{lessonFormState.tempMedia()}}" alt="">
                                    }
                                    @else if ( lesson.file.url != null ) {
                                        <img class="thumbnail-lesson" 
                                            src="{{lesson.file.url}}" alt="">
                                    }
                                    @else {
                                        <img class="icon" src="/assets/thumbnail-icon.svg" alt="">
                                    }
                                </figure>
                            </div>
                        }
                    </div>
                </div>
                    
            </div>
        </div>
        
    <div class="container-lesson-expand">

        <div class="container-media-preview">
            <input 
                type="file" 
                id="file" 
                name="file" 
                class="input-file"
                accept="image/* , video/*"
                (change)="this.fileService.onFileChanged($event , 'lessons' )"
            />
            <figure class="figure-attach">
                @if( lessonFormState.lessonSelected() === null || lessonFormState.tempMedia() === null ){
                    <img
                        class="attach-icon" 
                        src="./assets/attach-icon.svg" alt="Attach Icon">
                    <p class="text-simple"> Añade contenido a la lección</p>
                }
                @else{
                    <img 
                        class="figure"
                        src="{{ lessonFormState.tempMedia() }}" alt="">
                }
            </figure>
        </div>

        <div class="container-form-lesson">
            <app-form-lesson [course]="this.course()"  />
        </div>

    </div>
    
    <div class="icon-expand">
        <figure (click)="onExpandSlider()">
            <img src="./assets/expand-icon.svg" alt="Expand icon">
        </figure>
    </div>

</section>