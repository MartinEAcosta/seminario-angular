<form 
    (ngSubmit)="onSaveLesson()"
    [formGroup]="lessonFormState.lessonForm"
    class="form-lesson">
    
    <div class="container-lesson-top">
        <input 
            formControlName="title"
            class="input-title"
            placeholder="Escribé el titulo de la lección"
            type="text" name="" id=""
            >
        <form-error-label [control]="lessonFormState.lessonForm.get('title')!" [warningSvg]="true" />

        @if( lessonFormState.lessonSelected() ){
            <app-btn-remove [item]="lessonFormState.lessonSelected()" (onRemove)="onDeleteLesson( this.lessonFormState.lessonSelected()! )" />
        }
    </div>
    <div class="container-lesson-middle">
        <textarea
            formControlName="description"
            class="textarea-desc"
            name="" id=""
            placeholder="Escribe una descripción en caso de que la necesites..."
        ></textarea>

        <form-error-label [control]="lessonFormState.lessonForm.get('description')!" [warningSvg]="true" />

        <div class="module-selector">
            <div class="container-form-item module">
                <div class="container-form-select">
                    <div class="option-default">
                        <p class="option-default-selected">
                            @if( !this.moduleSelected() ){
                                Asignar módulo
                            }
                            @else{
                                {{ moduleSelected()?.title }}
                            }

                        </p>
                        <div class="container-icon">
                            <img class="icon option-down-icon" src="assets/down-icon.svg" alt="">
                        </div>
                    </div>
                    <ul class="options">
                        @for (module of modules(); track module.id) {
                            <li 
                                [ngClass]="{ 'selected-item' : this.moduleSelected() === module }"
                                (click)="onSelectModule( module )"
                                class="option-item">
                                {{ module.title }}
                            </li>
                        }
                        @if( this.moduleSelected() != null ){
                            <li (click)="moduleSelected.set(null)" class="option-item option-clear">
                                Quitar módulo
                                <img class="icon" src="assets/clean-icon.svg" alt="">
                            </li>
                        }
                    </ul>
                </div>
            </div>
        </div>

    </div>

    <div class="save">
        <button
            type="submit"
            class="btn btn-save">
            <img class="save-icon" src="/assets/save-icon.svg" alt="">
            Guardar
        </button>
    </div>

    <div class="container-lesson-bottom">
        <div class="start">
            @if( lessonFormState.lessonSelected()?.lesson_number != 0 ){
                <app-btn-navigation [text]="'Anterior lección'"  [isNextButton]="false" />
            }
        </div>
        <div class="end">
            <app-btn-navigation [text]="'Siguiente lección'" [isNextButton]="true" />
        </div>
    
    </div>

</form>